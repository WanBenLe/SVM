信贷违约服从伯努利分布
客户流失服从伯努利分布
信贷之间互为独立同分布
历史违约率是是真实的违约率

运行code1.py
得到:
评级为A的违约率
评级为B的违约率
评级为C的违约率
评级为D的违约率
(代码结果有打印)
truedefault.csv:企业代号,信誉评级,是否违约,该评级下对应的违约率

运行py1opt.py
得到:
A三次样条插值的结果图
B评级样条插值的结果图
C评级样条插值的结果图

用NSGA2完成下列优化
最大总利润( 贷款金额 * (利率 - 违约率) * (1 - 客户流失率))
最小方差 (所有债券利润的方差)
最大利润稳健率(利润的均值除以标准差)
约束
贷款金额10-100万
贷款利率4%-15%
其中贷款利率由客户流失率插值的逆运算得出
的优化结果(贷款金额和客户流失率)

然后等比放缩每个贷款的贷款金额使的总额度等于规定的额度,对小于10万的贷款设置为0
然后逆运算得到所有贷款的利率,小于4%和大于15%的设为边界值
(代码结果图片:帕累托解集3D图.结果利润核算.结果利润方差核算.结果利润稳健率核算)
Q1result.csv:企业代号,信誉评级,是否违约,违约率,贷款金额,流失率,利率

运行code2.py
得到:
有评级和无评级的企业的特征工程信息
剔除非有效发票
对于每家企业的进项发票和销项发票计算,发票金额,税额,加税合计的和,均值,标准差,偏度,峰度(2*3*5)和进项发票和销项发票对应项目的差(3)共33个特征变量
如出现计算错误的问题,则该企业的偏度和峰度共6个特征均设置为0
特征工程结果如下:
tezheng1.csv
tezheng2.csv

运行code2modelpy
对有评级和无评级的企业的33个特征进行了
基于分类信息熵的特征筛选
基于PCA的降维
建立了lightgbm模型并对无评价企业进行了评级预测并给出了对应评级的历史违约率
truedefaultq2.csv

运行py2opt.py
算法逻辑基本与py1opt一致,结果是附件2的,金额也限定在了1亿
Q2result.csv:企业代号,信誉评级,违约率,贷款金额,流失率,利率



从wind获取了20200121-20200418的28个申万一级行业指数收盘价并计算了收益率
数据文件:swyjireturn.csv

运行code3.py
假设企业经营状况与指数表现高度同步
完成了企业的28个行业标注工作,个体经营被归为商务贸易行业
基于假设对进项发票的三个项目进行调整,每家企业的数字会乘以(1+企业对应申万一级行业指数的收益率)
并得到了code2.py相近的特征数据
Q3tezheng2.csv

运行code3model.py
在调整后的特征数据下重新预测了附件2的评级并给出了对应的违约率

运行py3opt.py
算法逻辑基本与py1opt一致,结果是附件2的,金额也限定在了1亿,但评级的来源是调整后的特征数据
Q3result.csv:企业代号,信誉评级,违约率,贷款金额,流失率,利率
